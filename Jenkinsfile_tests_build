// jenkins pipeline exécution des tests / tests de couverture : ajouter dépendance phpunit/ normes de dev (PSR-2) / build de l'application
pipeline { 
	agent any
	stages {
		stage('tests_build'){
			steps{
				echo 'install phpunit'
				sh 'php composer.phar require --dev symfony/phpunit-bridge'
				
				echo 'changement de branche'
				dir('MSPR2/'){
					sh 'git checkout dev_test'
				
					echo 'launch test'
					sh 'php bin/phpunit'

					echo 'launch symfony'
					sh '/var/lib/jenkins/.symfony/bin/symfony server:start'
				}
				
			}
		}
	}
}
